<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_152-release) on Fri Jul 20 16:16:47 CDT 2018 -->
<title>PIDController</title>
<meta name="date" content="2018-07-20">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PIDController";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">edu.illinois.mitra.starl.objects</div>
<h2 title="Class PIDController" class="title">Class PIDController</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>edu.illinois.mitra.starl.objects.PIDController</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">PIDController</span>
extends java.lang.Object</pre>
<div class="block">A PID (proportional-integral-derivative) controller implementation, with
 additional modifications of saturation limit, wind-up limit, output slope limit,
 stored setpoint, and lowpass filtering of the derivative signal.

 Given a setpoint value and a current value, the PID controller will return command values
 that smoothly bring the current value to the setpoint value, depending on the three constants
 Kp, Ki, and Kd. See https://en.wikipedia.org/wiki/PID_controller#Loop_tuning for information
 on how to find optimal values.

 Created by VerivitalLab on 1/22/2016, updated 7/10/18.
 Some inspiration from https://github.com/tekdemo/MiniPID-Java.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#PIDController-double-double-">PIDController</a></span>(double&nbsp;Kp,
             double&nbsp;Ki)</code>
<div class="block">Constructor for a standard PI (proportional-integral) controller with no
 modifications.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#PIDController-double-double-double-">PIDController</a></span>(double&nbsp;Kp,
             double&nbsp;Ki,
             double&nbsp;Kd)</code>
<div class="block">Constructor for a standard PID (proportional-integral-derivative) controller with
 no modifications.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#PIDController-edu.illinois.mitra.starl.objects.PIDParams-">PIDController</a></span>(<a href="../../../../../edu/illinois/mitra/starl/objects/PIDParams.html" title="class in edu.illinois.mitra.starl.objects">PIDParams</a>&nbsp;params)</code>
<div class="block">Constructor for a standard PID (proportional-integral-derivative) controller with
 modifications.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#getFilterLength--">getFilterLength</a></span>()</code>
<div class="block">Represents the length of the lowpass filter (moving average) used to
 compensate for high-frequency changes in the setpoint.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#getKd--">getKd</a></span>()</code>
<div class="block">Access the D coefficient.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#getKi--">getKi</a></span>()</code>
<div class="block">Access the I coefficient.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#getKp--">getKp</a></span>()</code>
<div class="block">Access the P coefficient.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#getOutput-double-">getOutput</a></span>(double&nbsp;currentVal)</code>
<div class="block">Execute the PID algorithm, using the last recorded setpoint.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#getOutput-double-double-">getOutput</a></span>(double&nbsp;currentVal,
         double&nbsp;setpoint)</code>
<div class="block">Execute the PID algorithm.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#getOutputSlopeLimit--">getOutputSlopeLimit</a></span>()</code>
<div class="block">Represents the limit on how quickly the output is allowed to change, in units
 per second.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#getSaturationLimit--">getSaturationLimit</a></span>()</code>
<div class="block">Represents the cap on command values this controller is allowed to produce.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#getSetpoint--">getSetpoint</a></span>()</code>
<div class="block">Returns the current setpoint, which was set with either setSetpoint() or
 getOutput(setpoint).</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#getWindUpLimit--">getWindUpLimit</a></span>()</code>
<div class="block">Represents the limit on the cumulative error, capping it from growing larger in
 magnitude.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#isReversed--">isReversed</a></span>()</code>
<div class="block">Returns whether the output is negated or not</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#reset--">reset</a></span>()</code>
<div class="block">Erase the controller's history, making it function as if it had just been instantiated.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#setFilterLength-int-">setFilterLength</a></span>(int&nbsp;filterLength)</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#setKd-double-">setKd</a></span>(double&nbsp;Kd)</code>&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#setKi-double-">setKi</a></span>(double&nbsp;Ki)</code>&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#setKp-double-">setKp</a></span>(double&nbsp;Kp)</code>&nbsp;</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#setOutputSlopeLimit-double-">setOutputSlopeLimit</a></span>(double&nbsp;outputSlopeLimit)</code>&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#setReversed-boolean-">setReversed</a></span>(boolean&nbsp;reversed)</code>&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#setSaturationLimit-double-">setSaturationLimit</a></span>(double&nbsp;saturationLimit)</code>&nbsp;</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#setSetpoint-double-">setSetpoint</a></span>(double&nbsp;setpoint)</code>&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/illinois/mitra/starl/objects/PIDController.html#setWindUpLimit-double-">setWindUpLimit</a></span>(double&nbsp;windUpLimit)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PIDController-double-double-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PIDController</h4>
<pre>public&nbsp;PIDController(double&nbsp;Kp,
                     double&nbsp;Ki,
                     double&nbsp;Kd)</pre>
<div class="block">Constructor for a standard PID (proportional-integral-derivative) controller with
 no modifications.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>Kp</code> - Proportional coefficient, implements command += Kp * error</dd>
<dd><code>Ki</code> - Integral coefficient, implements command += Ki * cumsum(error)</dd>
<dd><code>Kd</code> - Derivative coefficient, implements command += Kd * delta(error)</dd>
</dl>
</li>
</ul>
<a name="PIDController-double-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PIDController</h4>
<pre>public&nbsp;PIDController(double&nbsp;Kp,
                     double&nbsp;Ki)</pre>
<div class="block">Constructor for a standard PI (proportional-integral) controller with no
 modifications. The derivative coefficient is often not necessary.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>Kp</code> - Proportional coefficient, implements command += Kp * error</dd>
<dd><code>Ki</code> - Integral coefficient, implements command += Ki * cumsum(error)</dd>
</dl>
</li>
</ul>
<a name="PIDController-edu.illinois.mitra.starl.objects.PIDParams-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PIDController</h4>
<pre>public&nbsp;PIDController(<a href="../../../../../edu/illinois/mitra/starl/objects/PIDParams.html" title="class in edu.illinois.mitra.starl.objects">PIDParams</a>&nbsp;params)</pre>
<div class="block">Constructor for a standard PID (proportional-integral-derivative) controller with
 modifications.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>params</code> - PIDParams object containing all relevant parameters for a PID controller</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getOutput-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutput</h4>
<pre>public&nbsp;double&nbsp;getOutput(double&nbsp;currentVal)</pre>
<div class="block">Execute the PID algorithm, using the last recorded setpoint. Call repeatedly and
 apply the returned value to the actuator, in order to physically move the current
 value closer to the set point.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>currentVal</code> - the current value of some system property</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a command value used to bring the current value closer to the set point</dd>
</dl>
</li>
</ul>
<a name="getOutput-double-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutput</h4>
<pre>public&nbsp;double&nbsp;getOutput(double&nbsp;currentVal,
                        double&nbsp;setpoint)</pre>
<div class="block">Execute the PID algorithm. Call repeatedly and apply the returned value to the actuator,
 in order to physically move the current value closer to the set point.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>currentVal</code> - the current value of some system property</dd>
<dd><code>setpoint</code> - the desired value for the system property</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a command value used to bring the current value closer to the set point</dd>
</dl>
</li>
</ul>
<a name="reset--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>public&nbsp;void&nbsp;reset()</pre>
<div class="block">Erase the controller's history, making it function as if it had just been instantiated.</div>
</li>
</ul>
<a name="getKp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKp</h4>
<pre>public&nbsp;double&nbsp;getKp()</pre>
<div class="block">Access the P coefficient. Setting takes the absolute value.</div>
</li>
</ul>
<a name="setKp-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setKp</h4>
<pre>public&nbsp;void&nbsp;setKp(double&nbsp;Kp)</pre>
</li>
</ul>
<a name="getKi--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKi</h4>
<pre>public&nbsp;double&nbsp;getKi()</pre>
<div class="block">Access the I coefficient. Setting takes the absolute value. The cumulative
 error is scaled so that the output does not spike.</div>
</li>
</ul>
<a name="setKi-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setKi</h4>
<pre>public&nbsp;void&nbsp;setKi(double&nbsp;Ki)</pre>
</li>
</ul>
<a name="getKd--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKd</h4>
<pre>public&nbsp;double&nbsp;getKd()</pre>
<div class="block">Access the D coefficient. Setting takes the absolute value.</div>
</li>
</ul>
<a name="setKd-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setKd</h4>
<pre>public&nbsp;void&nbsp;setKd(double&nbsp;Kd)</pre>
</li>
</ul>
<a name="getSaturationLimit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSaturationLimit</h4>
<pre>public&nbsp;double&nbsp;getSaturationLimit()</pre>
<div class="block">Represents the cap on command values this controller is allowed to produce.
 If 0 or negative, command values will not be capped.</div>
</li>
</ul>
<a name="setSaturationLimit-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSaturationLimit</h4>
<pre>public&nbsp;void&nbsp;setSaturationLimit(double&nbsp;saturationLimit)</pre>
</li>
</ul>
<a name="getWindUpLimit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWindUpLimit</h4>
<pre>public&nbsp;double&nbsp;getWindUpLimit()</pre>
<div class="block">Represents the limit on the cumulative error, capping it from growing larger in
 magnitude. If 0 or negative, the cumulative error will not be capped.</div>
</li>
</ul>
<a name="setWindUpLimit-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setWindUpLimit</h4>
<pre>public&nbsp;void&nbsp;setWindUpLimit(double&nbsp;windUpLimit)</pre>
</li>
</ul>
<a name="getFilterLength--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFilterLength</h4>
<pre>public&nbsp;double&nbsp;getFilterLength()</pre>
<div class="block">Represents the length of the lowpass filter (moving average) used to
 compensate for high-frequency changes in the setpoint. Larger values
 will smooth out the derivative term at the expense of slower response.
 The default length is 1 (no smoothing), but larger lengths (~8) are recommended.

 Note: setting the filter length resets the D component of the controller and
 should only be used during initialization/configuration.</div>
</li>
</ul>
<a name="setFilterLength-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFilterLength</h4>
<pre>public&nbsp;void&nbsp;setFilterLength(int&nbsp;filterLength)</pre>
</li>
</ul>
<a name="getOutputSlopeLimit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutputSlopeLimit</h4>
<pre>public&nbsp;double&nbsp;getOutputSlopeLimit()</pre>
<div class="block">Represents the limit on how quickly the output is allowed to change, in units
 per second.</div>
</li>
</ul>
<a name="setOutputSlopeLimit-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setOutputSlopeLimit</h4>
<pre>public&nbsp;void&nbsp;setOutputSlopeLimit(double&nbsp;outputSlopeLimit)</pre>
</li>
</ul>
<a name="getSetpoint--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSetpoint</h4>
<pre>public&nbsp;double&nbsp;getSetpoint()</pre>
<div class="block">Returns the current setpoint, which was set with either setSetpoint() or
 getOutput(setpoint).</div>
</li>
</ul>
<a name="setSetpoint-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSetpoint</h4>
<pre>public&nbsp;void&nbsp;setSetpoint(double&nbsp;setpoint)</pre>
</li>
</ul>
<a name="isReversed--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isReversed</h4>
<pre>public&nbsp;boolean&nbsp;isReversed()</pre>
<div class="block">Returns whether the output is negated or not</div>
</li>
</ul>
<a name="setReversed-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setReversed</h4>
<pre>public&nbsp;void&nbsp;setReversed(boolean&nbsp;reversed)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</body>
</html>
